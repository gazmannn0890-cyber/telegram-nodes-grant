<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Nodes • Современный мессенджер</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <style>
        /* Базовые стили для немедленной загрузки */
        :root {
            --primary: #0088cc;
            --primary-dark: #0055aa;
            --bg-primary: #0a0a0f;
            --bg-secondary: #121218;
            --bg-card: rgba(255, 255, 255, 0.05);
            --text-primary: #ffffff;
            --text-secondary: #8e8e93;
            --border-color: rgba(255, 255, 255, 0.12);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .preloader-logo {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(135deg, #0088cc, #af52de);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }
        
        .preloader-text {
            color: var(--text-secondary);
            font-size: 18px;
            margin-bottom: 30px;
        }
        
        .preloader-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    
    <!-- Основной CSS загрузится позже -->
    <link rel="stylesheet" href="style.css" id="main-css">
</head>
<body>
    <!-- Прелоадер -->
    <div class="preloader" id="preloader">
        <div class="preloader-logo">TN</div>
        <div class="preloader-text">Загрузка Telegram Nodes...</div>
        <div class="preloader-spinner"></div>
        <div class="preloader-progress" style="width: 300px; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-top: 20px; overflow: hidden;">
            <div id="progress-bar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #0088cc, #af52de); transition: width 0.3s;"></div>
        </div>
    </div>

    <!-- Аудио элементы -->
    <audio id="notification-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="message-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-message-pop-alert-2354.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="call-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-phone-ring-1001.mp3" type="audio/mpeg">
    </audio>

    <!-- Модальные окна -->
    <div class="modal-overlay" id="modal-overlay"></div>
    
    <!-- Модальное окно нового чата -->
    <div class="modal" id="new-chat-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Новый чат</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="contact-search">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Поиск контактов..." id="contact-search-input">
                </div>
                <div class="contact-select-list" id="contact-select-list">
                    <!-- Контакты для выбора -->
                </div>
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancel-new-chat">Отмена</button>
                    <button class="btn-primary" id="create-chat-btn">Создать чат</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно редактирования профиля -->
    <div class="modal" id="edit-profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Редактировать профиль</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="avatar-upload">
                    <div class="avatar-preview" id="avatar-preview">Г</div>
                    <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                    <button class="btn-upload" id="upload-avatar-btn">
                        <i class="fas fa-camera"></i>
                        Изменить фото
                    </button>
                </div>
                
                <div class="form-group">
                    <label>Имя</label>
                    <input type="text" id="edit-name" value="Газман" class="form-input">
                </div>
                
                <div class="form-group">
                    <label>Никнейм</label>
                    <input type="text" id="edit-username" value="@gazman" class="form-input">
                </div>
                
                <div class="form-group">
                    <label>О себе</label>
                    <textarea id="edit-bio" class="form-textarea">Основатель Telegram Nodes • Любитель кофе и технологий</textarea>
                </div>
                
                <div class="form-group">
                    <label>Номер телефона</label>
                    <input type="tel" id="edit-phone" value="+7 (900) 123-45-67" class="form-input">
                </div>
                
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancel-edit-profile">Отмена</button>
                    <button class="btn-primary" id="save-profile-btn">Сохранить изменения</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно настроек -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Настройки</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="settings-tab active" data-tab="general">Основные</button>
                    <button class="settings-tab" data-tab="notifications">Уведомления</button>
                    <button class="settings-tab" data-tab="privacy">Приватность</button>
                    <button class="settings-tab" data-tab="appearance">Внешний вид</button>
                </div>
                
                <div class="settings-content">
                    <div class="settings-section active" id="general-settings">
                        <h4>Основные настройки</h4>
                        <div class="setting-item">
                            <span>Язык интерфейса</span>
                            <select class="form-select">
                                <option value="ru">Русский</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <span>Автосохранение</span>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="settings-section" id="notifications-settings">
                        <h4>Уведомления</h4>
                        <div class="setting-item">
                            <span>Звук уведомлений</span>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <span>Вибросигнал</span>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="settings-section" id="appearance-settings">
                        <h4>Внешний вид</h4>
                        <div class="theme-selector">
                            <div class="theme-option active" data-theme="dark">
                                <i class="fas fa-moon"></i>
                                <span>Тёмная</span>
                            </div>
                            <div class="theme-option" data-theme="light">
                                <i class="fas fa-sun"></i>
                                <span>Светлая</span>
                            </div>
                            <div class="theme-option" data-theme="auto">
                                <i class="fas fa-adjust"></i>
                                <span>Авто</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно игры CS2 -->
    <div class="modal" id="cs2-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-crosshairs"></i> Counter-Strike 2</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="game-info">
                    <div class="game-stats">
                        <div class="stat">
                            <span class="stat-value">3</span>
                            <span class="stat-label">Онлайн</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">45m</span>
                            <span class="stat-label">Время игры</span>
                        </div>
                    </div>
                    
                    <div class="players-list">
                        <h4>Игроки онлайн:</h4>
                        <div class="player-item">
                            <div class="player-avatar" style="background: linear-gradient(135deg, #34c759, #2a8c4a);">Д</div>
                            <div class="player-info">
                                <div class="player-name">Дмитрий</div>
                                <div class="player-status">
                                    <span class="status-badge playing">В игре</span>
                                    <span class="player-rank">Global Elite</span>
                                </div>
                            </div>
                            <button class="btn-small" data-action="watch">Смотреть</button>
                        </div>
                        
                        <div class="player-item">
                            <div class="player-avatar" style="background: linear-gradient(135deg, #0088cc, #0055aa);">А</div>
                            <div class="player-info">
                                <div class="player-name">Алексей</div>
                                <div class="player-status">
                                    <span class="status-badge waiting">Ожидание</span>
                                    <span class="player-rank">Legendary Eagle</span>
                                </div>
                            </div>
                            <button class="btn-small" data-action="invite">Пригласить</button>
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-secondary" id="close-cs2-modal">Закрыть</button>
                    <button class="btn-primary" id="launch-cs2-btn">
                        <i class="fas fa-play"></i>
                        Запустить CS2
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Контейнер приложения -->
    <div class="app-container" id="app-container" style="display: none;">
        <!-- Боковая панель -->
        <aside class="side-panel">
            <!-- Профиль пользователя -->
            <div class="profile-section">
                <div class="profile-card" id="profile-card">
                    <div class="profile-avatar">
                        <div class="avatar-large">Г</div>
                        <div class="online-status active" title="Онлайн"></div>
                    </div>
                    <div class="profile-info">
                        <h2 class="profile-name">Газман</h2>
                        <p class="profile-status">@gazman • Основатель Telegram Nodes</p>
                    </div>
                    <button class="profile-menu-btn" id="profile-menu-btn">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>

                <!-- Статистика профиля -->
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-value">156</span>
                        <span class="stat-label">Чаты</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">48</span>
                        <span class="stat-label">Контакты</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">7</span>
                        <span class="stat-label">Узлы</span>
                    </div>
                </div>
            </div>

            <!-- Поиск -->
            <div class="search-section">
                <div class="search-wrapper">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Поиск сообщений, чатов, контактов..." id="global-search">
                    <button class="search-clear" id="search-clear-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Аккаунты -->
            <div class="section-header">
                <h3><i class="fas fa-user-circle"></i> Аккаунты</h3>
                <button class="section-action" id="add-account-btn" title="Добавить аккаунт">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="accounts-list">
                <div class="account-item active">
                    <div class="account-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="account-info">
                        <span class="account-name">Личный</span>
                        <span class="account-status">Основной</span>
                    </div>
                </div>
                <div class="account-item">
                    <div class="account-icon">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <div class="account-info">
                        <span class="account-name">Работа</span>
                        <span class="account-status">Неактивен</span>
                    </div>
                </div>
                <div class="account-item">
                    <div class="account-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="account-info">
                        <span class="account-name">Игры</span>
                        <span class="account-status">CS2 онлайн</span>
                    </div>
                </div>
            </div>

            <!-- Узлы -->
            <div class="section-header">
                <h3><i class="fas fa-sitemap"></i> Узлы</h3>
                <button class="section-action" id="add-node-btn" title="Создать узел">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="nodes-list" id="nodes-list">
                <!-- Узлы будут загружены через JS -->
            </div>

            <!-- Активность контактов -->
            <div class="section-header">
                <h3><i class="fas fa-bolt"></i> Активность</h3>
                <button class="section-action" id="refresh-activity-btn" title="Обновить">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            <div class="activity-list" id="activity-list">
                <!-- Активность будет загружена через JS -->
            </div>

            <!-- Контакты -->
            <div class="section-header">
                <h3><i class="fas fa-users"></i> Контакты</h3>
                <button class="section-action" id="add-contact-btn" title="Добавить контакт">
                    <i class="fas fa-user-plus"></i>
                </button>
            </div>
            <div class="contacts-list" id="contacts-list">
                <!-- Контакты будут загружены через JS -->
            </div>

            <!-- Игры -->
            <div class="section-header">
                <h3><i class="fas fa-gamepad"></i> Игры</h3>
                <button class="section-action" id="games-menu-btn" title="Все игры">
                    <i class="fas fa-ellipsis-h"></i>
                </button>
            </div>
            <div class="games-list" id="games-list">
                <div class="game-item" data-game="cs2">
                    <div class="game-icon">
                        <i class="fas fa-crosshairs"></i>
                    </div>
                    <div class="game-info">
                        <span class="game-name">CS2</span>
                        <span class="game-status">3 онлайн</span>
                    </div>
                    <div class="game-badge">Live</div>
                </div>
                <div class="game-item" data-game="dota">
                    <div class="game-icon">
                        <i class="fas fa-tower"></i>
                    </div>
                    <div class="game-info">
                        <span class="game-name">Dota 2</span>
                        <span class="game-status">2 онлайн</span>
                    </div>
                </div>
                <div class="game-item" data-game="valorant">
                    <div class="game-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="game-info">
                        <span class="game-name">Valorant</span>
                        <span class="game-status">1 онлайн</span>
                    </div>
                </div>
            </div>

            <!-- Категории -->
            <div class="section-header">
                <h3><i class="fas fa-tags"></i> Категории</h3>
                <button class="section-action" id="add-category-btn" title="Добавить категорию">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="categories-list">
                <div class="category-item active">
                    <div class="category-color" style="background: #0088cc;"></div>
                    <span class="category-name">Работа</span>
                    <span class="category-count">24</span>
                </div>
                <div class="category-item">
                    <div class="category-color" style="background: #34c759;"></div>
                    <span class="category-name">Семья</span>
                    <span class="category-count">8</span>
                </div>
                <div class="category-item">
                    <div class="category-color" style="background: #af52de;"></div>
                    <span class="category-name">Друзья</span>
                    <span class="category-count">16</span>
                </div>
                <div class="category-item">
                    <div class="category-color" style="background: #ff9500;"></div>
                    <span class="category-name">Игры</span>
                    <span class="category-count">12</span>
                </div>
            </div>
        </aside>

        <!-- Основной контент -->
        <main class="main-content">
            <!-- Хедер -->
            <header class="main-header">
                <div class="header-left">
                    <button class="back-btn" id="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="current-context">
                        <div class="context-icon" id="current-node-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <div class="context-info">
                            <h1 class="context-title" id="current-node-title">AlphaTeam</h1>
                            <p class="context-subtitle" id="current-node-subtitle">24 участника • 12 онлайн • Рабочая команда</p>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <div class="search-wrapper compact">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Поиск в чатах..." id="chat-search">
                    </div>
                    <div class="header-actions">
                        <button class="header-action-btn" id="notifications-btn" title="Уведомления">
                            <i class="fas fa-bell"></i>
                            <span class="badge">3</span>
                        </button>
                        <button class="header-action-btn" id="filter-btn" title="Фильтры">
                            <i class="fas fa-filter"></i>
                        </button>
                        <button class="header-action-btn" id="view-toggle-btn" title="Вид сетки/списка">
                            <i class="fas fa-th-large"></i>
                        </button>
                        <button class="header-action-btn primary" id="new-chat-header-btn">
                            <i class="fas fa-plus"></i>
                            Новый чат
                        </button>
                    </div>
                </div>
            </header>

            <!-- Фильтры -->
            <div class="filters-bar" id="filters-bar">
                <div class="filters-scroll">
                    <button class="filter-btn active">Все чаты</button>
                    <button class="filter-btn">Непрочитанные</button>
                    <button class="filter-btn">Закреплённые</button>
                    <button class="filter-btn">Личные</button>
                    <button class="filter-btn">Группы</button>
                    <button class="filter-btn">Каналы</button>
                    <button class="filter-btn">Архив</button>
                </div>
                <div class="sort-controls">
                    <button class="sort-btn active" data-sort="time">
                        <i class="fas fa-clock"></i>
                        По времени
                    </button>
                    <button class="sort-btn" data-sort="unread">
                        <i class="fas fa-envelope"></i>
                        По непрочитанным
                    </button>
                </div>
            </div>

            <!-- Список чатов -->
            <div class="chats-container grid-view" id="chats-container">
                <!-- Чаты будут загружены через JS -->
            </div>

            <!-- Пустое состояние -->
            <div class="empty-state" id="empty-state" style="display: none;">
                <div class="empty-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h3>Нет активных чатов</h3>
                <p>Начните новый разговор или выберите другой узел</p>
                <button class="btn-primary" id="start-first-chat-btn">
                    <i class="fas fa-plus"></i>
                    Начать первый чат
                </button>
            </div>
        </main>

        <!-- Панель активного чата -->
        <div class="chat-panel" id="chat-panel">
            <div class="chat-header">
                <div class="chat-header-left">
                    <button class="back-btn" id="close-chat-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="chat-info">
                        <div class="chat-avatar" id="chat-avatar">Д</div>
                        <div class="chat-details">
                            <h3 class="chat-title" id="chat-title">Дизайн-команда</h3>
                            <div class="chat-status">
                                <span class="online-dot"></span>
                                <span class="status-text" id="chat-status">8 участников • 5 онлайн</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chat-header-right">
                    <button class="chat-action-btn" id="voice-call-btn" title="Аудиозвонок">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button class="chat-action-btn" id="video-call-btn" title="Видеозвонок">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="chat-action-btn" id="chat-info-btn" title="Информация о чате">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    <button class="chat-action-btn" id="chat-menu-btn" title="Меню чата">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>
            </div>

            <!-- Сообщения -->
            <div class="messages-container" id="messages-container">
                <div class="messages-scroll" id="messages-scroll">
                    <!-- Сообщения будут загружены через JS -->
                </div>
                <div class="typing-indicator" id="typing-indicator">
                    <div class="typing-dots">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                    <span id="typing-text">Кто-то печатает...</span>
                </div>
            </div>

            <!-- Ввод сообщения -->
            <div class="message-input-container">
                <div class="input-actions">
                    <button class="input-action-btn" id="attach-file-btn" title="Прикрепить файл">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <button class="input-action-btn" id="attach-image-btn" title="Фото/Видео">
                        <i class="fas fa-image"></i>
                    </button>
                    <button class="input-action-btn" id="voice-message-btn" title="Голосовое сообщение">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="input-action-btn" id="emoji-btn" title="Эмодзи">
                        <i class="fas fa-smile"></i>
                    </button>
                    <button class="input-action-btn" id="sticker-btn" title="Стикеры">
                        <i class="fas fa-sticky-note"></i>
                    </button>
                </div>
                <div class="message-input-wrapper">
                    <textarea 
                        class="message-input" 
                        id="message-input" 
                        placeholder="Сообщение..."
                        rows="1"
                    ></textarea>
                    <button class="send-btn" id="send-message-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Экран звонка -->
        <div class="call-screen" id="call-screen">
            <div class="call-container">
                <div class="call-header">
                    <div class="call-timer" id="call-timer">00:00</div>
                    <div class="call-actions">
                        <button class="call-action-btn" id="minimize-call-btn" title="Свернуть">
                            <i class="fas fa-window-minimize"></i>
                        </button>
                        <button class="call-action-btn" id="end-call-btn" title="Завершить">
                            <i class="fas fa-phone-slash"></i>
                        </button>
                    </div>
                </div>
                <div class="call-content">
                    <div class="call-avatar" id="call-avatar">
                        А
                        <div class="call-pulse"></div>
                    </div>
                    <h2 class="call-name" id="call-name">Алексей</h2>
                    <p class="call-status" id="call-status">Вызов...</p>
                </div>
                <div class="call-controls">
                    <button class="call-control-btn" id="mute-call-btn">
                        <i class="fas fa-microphone"></i>
                        <span>Микрофон</span>
                    </button>
                    <button class="call-control-btn" id="video-toggle-btn">
                        <i class="fas fa-video"></i>
                        <span>Камера</span>
                    </button>
                    <button class="call-control-btn" id="speaker-btn">
                        <i class="fas fa-volume-up"></i>
                        <span>Динамик</span>
                    </button>
                    <button class="call-control-btn danger" id="end-call-main-btn">
                        <i class="fas fa-phone-slash"></i>
                        <span>Завершить</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Экран конференции -->
        <div class="conference-screen" id="conference-screen">
            <div class="conference-header">
                <div class="conference-info">
                    <div class="conference-timer" id="conference-timer">00:00</div>
                    <div class="conference-title">
                        <i class="fas fa-users"></i>
                        <span>Групповой звонок • 6 участников</span>
                    </div>
                </div>
                <div class="conference-actions">
                    <button class="conference-action-btn" id="add-participant-btn" title="Добавить участника">
                        <i class="fas fa-user-plus"></i>
                    </button>
                    <button class="conference-action-btn" id="fullscreen-btn" title="Полный экран">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
            <div class="conference-grid" id="conference-grid">
                <!-- Участники конференции -->
            </div>
            <div class="conference-controls">
                <button class="conference-control-btn" id="conf-mute-btn">
                    <i class="fas fa-microphone"></i>
                </button>
                <button class="conference-control-btn" id="conf-video-btn">
                    <i class="fas fa-video"></i>
                </button>
                <button class="conference-control-btn" id="conf-screen-btn">
                    <i class="fas fa-desktop"></i>
                </button>
                <button class="conference-control-btn danger" id="conf-end-btn">
                    <i class="fas fa-phone-slash"></i>
                </button>
            </div>
        </div>

        <!-- Мини-плеер звонка -->
        <div class="mini-call" id="mini-call">
            <div class="mini-call-content">
                <div class="mini-avatar">А</div>
                <div class="mini-info">
                    <span class="mini-name">Алексей</span>
                    <span class="mini-timer">01:23</span>
                </div>
                <button class="mini-action" id="expand-call-btn" title="Развернуть">
                    <i class="fas fa-expand"></i>
                </button>
                <button class="mini-action danger" id="end-mini-call-btn" title="Завершить">
                    <i class="fas fa-phone-slash"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Плавающие кнопки действий -->
    <div class="floating-actions">
        <button class="floating-btn" id="theme-toggle-btn" title="Сменить тему">
            <i class="fas fa-moon"></i>
        </button>
        <button class="floating-btn" id="new-chat-float-btn" title="Новый чат">
            <i class="fas fa-edit"></i>
        </button>
        <button class="floating-btn primary" id="start-conference-btn" title="Начать конференцию">
            <i class="fas fa-video"></i>
        </button>
        <button class="floating-btn" id="quick-settings-btn" title="Быстрые настройки">
            <i class="fas fa-cog"></i>
        </button>
    </div>

    <!-- Панель эмодзи -->
    <div class="emoji-picker" id="emoji-picker">
        <div class="emoji-header">
            <div class="emoji-categories">
                <button class="emoji-category active" data-category="smileys">
                    <i class="fas fa-smile"></i>
                </button>
                <button class="emoji-category" data-category="people">
                    <i class="fas fa-user"></i>
                </button>
                <button class="emoji-category" data-category="nature">
                    <i class="fas fa-leaf"></i>
                </button>
                <button class="emoji-category" data-category="food">
                    <i class="fas fa-utensils"></i>
                </button>
            </div>
            <button class="emoji-close" id="emoji-close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="emoji-grid" id="emoji-grid">
            <!-- Эмодзи будут загружены через JS -->
        </div>
    </div>

    <!-- Контекстное меню -->
    <div class="context-menu" id="context-menu">
        <div class="context-menu-content" id="context-menu-content">
            <!-- Будет заполнено динамически -->
        </div>
    </div>

    <!-- Система уведомлений -->
    <div class="notification-system" id="notification-system">
        <!-- Уведомления будут добавляться динамически -->
    </div>

    <!-- Шаблоны для динамического создания -->
    <template id="chat-card-template">
        <div class="chat-card">
            <div class="chat-card-header">
                <div class="chat-avatar-main"></div>
                <div class="chat-info-main">
                    <div class="chat-title-main">
                        <span class="chat-name"></span>
                        <span class="chat-type"></span>
                    </div>
                    <div class="chat-time"></div>
                </div>
            </div>
            <p class="chat-preview"></p>
            <div class="chat-footer">
                <div class="chat-members">
                    <div class="member-avatars"></div>
                    <span class="member-count"></span>
                </div>
                <div class="chat-stats">
                    <i class="fas fa-thumbtack pinned-icon" style="display: none;"></i>
                    <span class="unread-badge" style="display: none;"></span>
                </div>
            </div>
        </div>
    </template>

    <template id="message-template">
        <div class="message">
            <div class="message-avatar"></div>
            <div class="message-content">
                <div class="message-sender"></div>
                <div class="message-text"></div>
                <div class="message-meta">
                    <span class="message-time"></span>
                    <span class="message-status"></span>
                    <span class="message-edited" style="display: none;">(ред.)</span>
                </div>
            </div>
        </div>
    </template>

    <template id="notification-template">
        <div class="notification">
            <div class="notification-header">
                <div class="notification-title">
                    <i class="notification-icon"></i>
                    <span class="notification-title-text"></span>
                </div>
                <button class="notification-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="notification-body"></div>
            <div class="notification-actions" style="display: none;"></div>
        </div>
    </template>

    <!-- Подключаем основной JavaScript -->
    <script src="script.js"></script>
</body>
</html>
